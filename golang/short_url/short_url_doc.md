### 短链生成方案
1. 短链的一般应用于营销、推广、短信通知等业务场景中。微博等平台都会限制发布内容的字数，在做营销活动时，如果把整个URL全部发出去，容易导致内容过长而无法传播。因此需要短链。
   1. 一些其他考虑点：原始URL可能携带业务参数信息，不安全；URL太长占用带宽等等。
2. 短链的工作原理：短链与原始URL形成映射关系，访问短链时，通过302重定向的方式，访问到原始URL。
3. 设计短链的一些核心问题：
   1. 唯一性：短链必须唯一，不能重复。防止一个短链被重定向到多个原始URL。
   2. 性能：高并发场景下，要能够快速的生成短链。
   3. 重定向设计：301是永久重定向，浏览器会缓存第一次的请求，后续同样的请求都会直接转发到新的服务器；302是临时重定向，浏览器不做缓存，每次请求都会先访问原始服务器，再做转发。
   4. 可逆：原始URL与短链应该建立一个双射的关系，即两者可以互相找到。
4. 整体架构：
   1. 发号器(生成器)：用于短链的生成。
   2. 缓存：用于缓存短链与原始URL的映射关系，后续同一URL直接从缓存中拿短链。
5. 常见实现方案：
   1. 使用哈希算法对原始URL生成随机数，如MurmurHash3；生成后的随机数使用Base62编码，转换为一个只有大小写字母+数字的短链后缀，拼接在公共域名后。
   2. 使用Redis的incr或者MySQL的自增主键，来生成不会重复的递增唯一数字，同样进行Base62编码。
   3. 不借助第三方组件，使用UUID或SnowFlake等分布式唯一ID生成策略生成唯一数字，然后进行Base62编码。
6. 常见问题
   1. 哈希算法可能存在哈希冲突，可能需要通过Set/MySQL唯一索引/布隆过滤器等结构来避免冲突，且每次生成都要先查一遍，影响性能。
   2. Redis/MySQL的自增方案，产生的数字虽然不会重复，但由于是自增的，会使得短链的生成不再具有随机性，容易被猜测或破解。
   3. 因此，结合业务场景，从随机性和性能方面考虑，选择合适的短链生成方案。
7. 其他技巧
   1. 高并发场景下可以考虑预热的方案，提前生成一批短链，直接分配给对应的URL，减少并发压力；由于预生成，所以不用考虑性能问题，可以优先使用哈希算法。
