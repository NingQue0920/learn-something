### Golang项目动态加载所需依赖
#### 背景：
    项目支持接入多个存储中间件，但是在真正运行时只允许配置某一个，如果将所有中间件都加载，会影响编译速度，同时导致编译产物体积过大。
    所以考虑将项目中的中间件动态按需加载，从而减少编译产物体积，并提高编译速度。
#### 基本思路：
    1. golang在编译时具有build tag特性，一般用于跨平台场景，如：在获取系统性能资源时，Windows通常会通过WMI系统调用，而Linux只需要去/proc目录下读取对应文件内容。
    同时，Linux没有WMI的API，所以一般都会写两个文件，在编译时根据当前操作系统动态加载。
    2. 对应多个存储介质时，如redis,clickhouse,kafka等，也可以通过添加tags标签，并编写脚本，通过配置文件的内容进行动态加载。
#### 核心问题：
    1. 如何通过编译？
        不能在公共文件中直接初始化（类型断言）具体的中间件类型，因为如果tags中不包含，编译时会报错Undefined。所以需要`抽象化`
        为了简化场景，简单的将所有的中间件抽象为3个方法，Initialize（初始化），Read（数据读取）和Write（数据写入），并抽象为通用接口。
        创建一个中间件管理器Manager，在系统启动时，根据配置文件，注册需要初始化的中间件。
        Manager不知道如何加载中间件，也不该知道（因为可能某些不需要编译），因此，Manager注册的只是一个`工厂`。
    2. 如何使用某个中间件？
        在每个中间件的init()函数中，将自己的工厂注册到Manager中。
        main()函数启动时，会根据配置文件，遍历Manager中的工厂，调用工厂函数NewXXX()创建中间件，并调用每个中间件的Initialize()函数完成初始化。
        在使用时，调用Get/Set方法前，先通过managet.GetReader/manager.GetWriter来获取对应中间件的方法。
#### 使用限制：
    1. 因为使用了接口实现通用的Read和Write，所以必须保证各种中间件读写操作的高度统一抽象，这其实很难做到。
        